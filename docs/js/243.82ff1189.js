"use strict";(self["webpackChunkfrontend_nts"]=self["webpackChunkfrontend_nts"]||[]).push([[243],{9746:function(t,a,s){s.d(a,{Z:function(){return r}});var o=function(){var t=this;t._self._c;return t._m(0)},e=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"h-100"},[a("div",{staticClass:"h-100",attrs:{id:"map"}})])}],i=(s(1703),{props:["status","compLoc"],data(){return{interval:null,time:null,map:null,marker:null,position:{lat:37.51082,lng:127.02928},circle:[]}},created(){console.log("[created]"),"geolocation"in navigator&&this.getCurPos()},mounted(){if(console.log("[mounted]"),window.kakao&&window.kakao.maps)this.initMap();else{const t=document.createElement("script");t.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=8425cb2bc152a90c5eae2c00e29f04dc",t.addEventListener("load",(()=>{kakao.maps.load(this.initMap)})),document.head.appendChild(t)}},watch:{position:{handler:function(){if(console.log("watch call"),this.map){var t=new kakao.maps.LatLng(this.position.lat,this.position.lng);this.map.setCenter(t),this.marker.setPosition(t),this.posCheck()}},deep:!0}},beforeDestroy(){console.log("[beforedestroy]"),navigator.geolocation.clearWatch(this.interval)},destroyed(){console.log(this.interval)},methods:{initMap(){console.log("[methods]-[initmap]");var t=document.getElementById("map"),a={center:new kakao.maps.LatLng(this.position.lat,this.position.lng),level:4};this.map=new kakao.maps.Map(t,a),this.marker=new kakao.maps.Marker({position:this.map.getCenter()}),this.marker.setMap(this.map),this.compLoc.forEach((t=>{this.circle.push(new kakao.maps.Circle({center:new kakao.maps.LatLng(t.lat,t.lng)}))})),this.circle.forEach((t=>{t.setMap(this.map)})),this.map.setDraggable(!0),kakao.maps.event.addListener(this.map,"click",(t=>{var a=t.latLng;this.marker.setPosition(a),this.position.lat=a.getLat(),this.position.lng=a.getLng()}))},getCurPos(){console.log("call getCurPos"),navigator.geolocation&&(this.interval=navigator.geolocation.watchPosition((t=>{this.position.lat=t.coords.latitude,this.position.lng=t.coords.longitude}),(t=>{console.log("error! ",t.message)}),{enableHighAccuracy:!1}))},posCheck(){try{this.circle.forEach((t=>{if(this.position.lng>t.getBounds().ha&&this.position.lat>t.getBounds().qa&&this.position.lng<t.getBounds().oa&&this.position.lat<t.getBounds().pa)throw this.$emit("setStatus",!0),new Error("stop loop");this.$emit("setStatus",!1)}))}catch(t){}}}}),n=i,c=s(3736),l=(0,c.Z)(n,o,e,!1,null,null,null),r=l.exports},3243:function(t,a,s){s.r(a),s.d(a,{default:function(){return d}});var o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card h-100 border-0 py-2 container-md"},[t._m(0),a("div",{staticClass:"card-body h-25 border-0 shadow"},[a("div",{staticClass:"row row-cols-5 m-0 align-items-center h-100"},[a("div",{staticClass:"col p-0 fw-light"},[a("h4",[t._v(t._s(t.getDay(-2)))])]),a("div",{staticClass:"col p-0 fw-light"},[a("h4",[t._v(t._s(t.getDay(-1)))])]),a("div",{staticClass:"col p-0 fw-bold"},[a("h4",[t._v(t._s(t.getDay(0)))])]),a("div",{staticClass:"col p-0 fw-light"},[a("h4",[t._v(t._s(t.getDay(1)))])]),a("div",{staticClass:"col p-0 fw-light"},[a("h4",[t._v(t._s(t.getDay(2)))])])])]),a("div",{staticClass:"card-body h-25 border-0"},[a("h2",{staticClass:"fw-bold"},[t._v(t._s(t.getTime))])]),t._m(1),a("div",{staticClass:"card-body p-0 h-100 border-0"},[a("button",{staticClass:"btn w-100 py-3 my-1 bg-gradient",class:t.status?"btn-success":"btn-secondary",on:{click:t.attend}},[t._v(" 출근하기 ")]),a("button",{staticClass:"btn w-100 py-3 my-1 btn-secondary bg-gradient opacity-50",staticStyle:{"--bs-bg-opacity":"0.5"}},[t._v(" 나의 출퇴근 기록 ")])]),a("div",{staticClass:"offcanvas offcanvas-bottom h-100",attrs:{tabindex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel"}},[t._m(2),a("div",{staticClass:"offcanvas-body small h-100 p-0"},[a("kakao-map",{staticClass:"h-100",attrs:{status:t.status,compLoc:t.compLoc},on:{setStatus:t.setStatus}}),a("button",{staticClass:"btn fixed-bottom mb-5 mx-5 bg-gradient py-3",class:t.status?"btn-success":"btn-secondary",on:{click:t.attend}},[t._v(" 출근하기 ")])],1)])])},e=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header border-0 row m-0 px-0 py-3 bg-transparent"},[a("div",{staticClass:"col-2 text-start"},[a("button",{staticClass:"btn h-100 border rounded-circle"},[a("i",{staticClass:"bi-person h-100"})])]),a("div",{staticClass:"col-10 text-start"},[a("h5",[a("strong",[t._v("김지각")]),t._v("님"),a("br"),t._v("환영합니다.")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-body border-0 p-0"},[a("button",{staticClass:"btn bg-gradient w-100 shadow",attrs:{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasBottom","aria-controls":"offcanvasBottom"}},[t._v(" 내 위치보기 ")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"offcanvas-header"},[a("h5",{staticClass:"offcanvas-title",attrs:{id:"offcanvasBottomLabel"}},[t._v(" Nine to Six Map ")]),a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}})])}],i=s(9746),n={data(){return{status:!1,compLoc:[{lat:37.501957186941915,lng:127.03731489385599},{lat:37.275884784729506,lng:127.10868871356905}]}},components:{kakaoMap:i.Z},async created(){},computed:{getTime(){return this.$moment().format("HH:mm:ss")},getDay(){return t=>this.$moment().add("days",t).format("DD\n일")}},methods:{async getCompLoc(){try{const t=await this.$axios.get("/attend");this.compLoc=t.data}catch(t){console.log(t)}},setStatus(t){this.status=t},async attend(){try{if(this.status)alert("서버에 출첵 요청!");else{const t=await this.$axios.get("/attend",{params:{test:"test13"}});this.compLoc=t.data,alert("현재 위치가 회사 근처가 아닙니다 위치를 확인해주세요!")}}catch(t){console.log(t)}}}},c=n,l=s(3736),r=(0,l.Z)(c,o,e,!1,null,null,null),d=r.exports}}]);
//# sourceMappingURL=243.82ff1189.js.map